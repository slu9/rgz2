<!doctype html>
<html lang="ru" class="{% if session.get('theme', 'day') == 'night' %}city-night{% else %}city-day{% endif %}">
<head>
    <meta charset="utf-8">
    <title>City Storage ‚Äì –∫–∞–º–µ—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
    (() => {
        const theme = localStorage.getItem("theme") || "day";
        if (theme === "night") {
            document.documentElement.classList.add("city-night");
        } else {
            document.documentElement.classList.add("city-day");
        }
    })();
    </script>

    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicon.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicon.png') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='img/favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preload" as="image" href="{{ url_for('static', filename='img/day.png') }}">
    <link rel="preload" as="image" href="{{ url_for('static', filename='img/night.png') }}">

    <style>
        .city-day, .city-night {
            transition: none !important;
        }
    </style>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
    
</head>

<body data-username="{{ current_user or '' }}">
<header class="main-header">
    <div class="logo">
        <span class="logo-city">City</span><span class="logo-storage">Storage</span>
    </div>

    <nav class="main-nav">
        <a href="{{ url_for('index') }}">–ì–æ—Ä–æ–¥</a>
        
        {% if current_user %}
            <a href="{{ url_for('profile') }}">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
            <span class="user-name">–ü—Ä–∏–≤–µ—Ç, {{ current_user }}!</span>
            <a href="{{ url_for('logout') }}">–í—ã—Ö–æ–¥</a>
        {% else %}
            <a href="{{ url_for('login') }}">–í—Ö–æ–¥</a>
            <a href="{{ url_for('register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
        
        <a href="{{ url_for('pricing') }}">–¢–∞—Ä–∏—Ñ—ã</a>
        <button id="toggleTheme" class="theme-btn">
            {% if session.get('theme', 'day') == 'night' %}
                ‚òÄÔ∏è –î–µ–Ω—å
            {% else %}
                üåô –ù–æ—á—å
            {% endif %}
        </button>
    </nav>

    <div class="student-info">
        {{ student_name }} ‚Äî {{ student_group }}
    </div>
</header>

<main class="page-content">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-container">
                {% for msg in messages %}
                    <div class="flash-message">{{ msg }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}

    <div id="cell-tooltip" class="cell-tooltip hidden"></div>
</main>

<div id="deleteModal" class="confirm-modal hidden">
    <div class="confirm-backdrop"></div>
    <div class="confirm-window">
        <h3 class="confirm-title">–£–±—Ä–∞—Ç—å –¥–æ–º —Å —É—á–∞—Å—Ç–∫–∞?</h3>
        <p class="confirm-text">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–±—Ä–∞—Ç—å —Å–≤–æ–π –¥–æ–º —Å —ç—Ç–æ–≥–æ —É—á–∞—Å—Ç–∫–∞? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
        <div class="confirm-actions">
            <button id="modal-cancel" class="confirm-btn confirm-cancel">–û—Ç–º–µ–Ω–∞</button>
            <button id="modal-confirm" class="confirm-btn confirm-ok">–£–±—Ä–∞—Ç—å –¥–æ–º</button>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/city.js') }}"></script>
</body>
</html>