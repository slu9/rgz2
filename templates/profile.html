{% extends "base.html" %}

{% block content %}
<div class="auth-wrapper">
    <div class="profile-header">
        <h1 class="auth-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
        
        <div class="user-info-card">
            <div class="user-main-info">
                <h3>{{ user_name }}</h3>
                <p class="user-login">–õ–æ–≥–∏–Ω: {{ user_login }}</p>
            </div>
            
            <div class="balance-section">
                <div class="balance-amount">
                    üí∞ –ë–∞–ª–∞–Ω—Å: <strong>{{ user_balance }} —Ä—É–±</strong>
                </div>
                <form method="POST" action="{{ url_for('topup_balance') }}" class="topup-form">
                    <input type="hidden" name="theme" value="{{ session.get('theme', 'day') }}">
                    <button type="submit" class="auth-button topup-btn">
                        –ü–æ–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div class="my-cells-section">
        <h3>–ú–æ–∏ –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —è—á–µ–π–∫–∏</h3>
        
        {% if user_cells %}
            <div class="cells-grid">
                {% for cell in user_cells %}
                <div class="cell-card">
                    <div class="cell-number">–Ø—á–µ–π–∫–∞ #{{ cell.id }}</div>
                    <div class="cell-type">{{ cell.building_name }}</div>
                    <form method="POST" action="{{ url_for('toggle_cell', cell_id=cell.id) }}">
                        <input type="hidden" name="theme" value="{{ session.get('theme', 'day') }}">
                        <input type="hidden" name="from_profile" value="1">
                        <button type="submit" class="free-cell-btn">
                            –û—Å–≤–æ–±–æ–¥–∏—Ç—å
                        </button>
                    </form>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-cells">
                <p>–£ –≤–∞—Å –Ω–µ—Ç –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö —è—á–µ–µ–∫</p>
                <a href="{{ url_for('index') }}" class="auth-button">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —è—á–µ–π–∫—É</a>
            </div>
        {% endif %}
    </div>

    <div class="profile-stats">
        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-label">–ê—Ä–µ–Ω–¥–æ–≤–∞–Ω–æ —è—á–µ–µ–∫:</span>
                <span class="stat-value">{{ user_cells|length }}/5</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
